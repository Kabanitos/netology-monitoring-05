# Домашнее задание к занятию 17 «Инцидент-менеджмент»

## Задание

Составьте постмортем на основе реального сбоя системы GitHub в 2018 году.

Информацию о сбое можно изучить по ссылкам ниже:

* [краткое описание на русском языке](https://habr.com/ru/post/427301/);
* [развёрнутое описание на английском языке](https://github.blog/2018-10-30-oct21-post-incident-analysis/).


## Ответ

### Постмортен
|  |  |
|---|---|
| Краткое описание инцедента |21 Октября в 22:52  была замена оптического кабеля 100G, что привело к потери связи на 43 секунды между сетевым узлом на Восточном побережье США и основным ЦОД-ом на Восточном побережье США. Это привело к цепочке событий, из-за которого произошел сбой сервиса. |
| Что было сделано | Было запущено восстановление БД из резервной копии. После восстановления началась репликация БД с Западного побережья. |                                 
|Причина инцидента|Во время замены оптики 100G произошла потеря связи, между сетевым узлом на Восточном побережье США и основным ЦОД-ом на Восточном побережье США.|
|Воздействие|Во время инцидента GitHub не мог обслуживать webhook и создавать и публиковать сайты GitHub Pages.|
|Обнаружение|Инцидет был обнаружен инженерами первой группы реагирования, затем были привлечены инженеры из команды по разработке баз данных.|
|Реакция|Ответсвенные инженеры устранили инцидент за 24 часа и 11 минут.|
|Восстановление|Было запущено восстановление БД из резервной копии. После восстановления началась репликация БД с Западного побережья.|
|Таймлайн|21 Октября 2018 г. 22:54 UTC - Система мониторинга начала генерировать оповещения о сбое. <br> 21 Октября 2018 г. 23:02 UTC - Инженеры первой группы реагирования определили, что топологии для многочисленных кластеров баз данных находятся в неожиданном состоянии. <br> 21 Октября 2018 г. 23:07 UTC - Группа реагирования решила вручную заблокировать внутренние инструменты развертывания, чтобы предотвратить внесение дополнительных изменений. <br> 21 Октября 2018 г. 23:09 UTC - Группа реагирования перевела сайт в желтый статус. <br> 21 Октября 2018 г. 23:11 UTC - Присоединился координатор инцидента и через две минуты принял решение изменить статус на красный. <br> 21 Октября 2018 г. 23:13 UTC - Инженеры из команды по разработке баз данных GitHub были вызваны на совещание, для исследованипя текущего состояния. <br> 21 Октября 2018 г. 23:19 UTC - Было принято решение прекратить выполнение заданий, которые записывают метаданные. <br> 22 Октября 2018 г. 00:05 UTC - Инженеры из группы реагирования на инциденты начали разрабатывать план устранения несоответствий данных и внедрения процедур отказоустойчивости для MySQL. <br> 22 Октября 2018 г. 00:41 UTC - Запуск процесса резервного копирования всех затронутых кластеров MySQL. <br> 22 Октября 2018 г. 06:51 UTC - несколько кластеров завершили восстановление из резервных копий в ЦОД-e на Восточном побережье США и начали реплицировать новые данные с Западного побережья. <br> 22 Октября 2018 г. 07:46 UTC - Оповещения пользователей сервиса об инцеденте. <br> 22 Октября 2018 г. 11:12 UTC - Основные БД были восстановлены на Восточном побережье США. <br> 22 Октября 2018 г. 13:15 UTC - Пиковая нагрузка на GitHub.com. Группа реагирования на инциденты провела обсуждение того, как действовать дальше. <br> 22 Октября 2018 г. 16:24 UTC - После синхронизации реплик выполнили аварийное переключение на исходную топологию, устранив непосредственные проблемы с задержкой/доступностью. <br> 22 Октября 2018 г. 16:45 UTC - Обработка всех накопившихся данных. <br> 22 Октября 2018 г. 23:03 UTC - Система работает в штатном режиме. Статус сайта был обновлен до зеленого.                                                                                                                                                              |
| Последующие действия       | Была изменена конфигурация Orchestrator. Переход на новый механизм отчетности о состоянии.                                                                                                                                                                            |
